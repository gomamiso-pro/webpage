<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Web設計・見積・指示書</title>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<style>
body { font-family: "Hiragino Sans", sans-serif; margin:0; padding:10px; background:#f7f7f7; }
header { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
header h1 { font-size:1.4rem; color:#333; }
.price-btn { background:#0078d4; color:white; border:none; border-radius:6px; padding:6px 12px; cursor:pointer; }
.price-btn:hover { background:#005fa3; }
section { background:#fff; padding:15px; border-radius:12px; margin-top:10px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
h3 { margin-top:20px; }
table { width:100%; border-collapse:collapse; font-size:0.9rem; margin-top:10px; }
th, td { border:1px solid #ddd; padding:6px; }
th { background:#efefef; }
.price { text-align:right; }
textarea { width:100%; padding:8px; margin-top:4px; border-radius:6px; border:1px solid #ccc; font-size:0.9rem; }
iframe { width:100%; height:200px; border:1px solid #ccc; border-radius:6px; margin-top:10px; }
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.4); justify-content:center; align-items:center; }
.modal-content { background:#fff; padding:20px; border-radius:10px; max-width:90%; max-height:90%; overflow:auto; }
.close { float:right; cursor:pointer; font-weight:bold; font-size:1.2rem; }
button { width:100%; background:#0078d4; color:white; border:none; padding:12px; border-radius:8px; margin-top:15px; font-size:1rem; }
button:hover { background:#005fa3; }
</style>
</head>
<body>
<header>
<h1>📱 Web設計・見積・指示書</h1>
<button class="price-btn" onclick="showPriceModal()">💰料金表</button>
</header>

<section id="output">
<h3>📘 システム概要</h3>
<p>
目的：おまかせ<br>
タイプ：ECサイト<br>
ターゲット：一般ユーザー<br>
技術構成：HTML, CSS, JavaScript, Python<br>
デザイン：1カラム（スマホ中心）・サンセリフ・ブルー系<br>
サーバー：さくらサーバー<br>
外部連携：ファイルメーカー<br>
SNS連携：Instagram, LINE
</p>

<h3>🧩 機能一覧</h3>
<table>
<tr><th>No</th><th>機能</th><th>概要</th></tr>
<tr><td>1</td><td>ログイン</td><td>ログイン機能を実装</td></tr>
<tr><td>2</td><td>検索</td><td>検索機能を実装</td></tr>
<tr><td>3</td><td>登録・編集</td><td>登録・編集機能を実装</td></tr>
<tr><td>4</td><td>コメント</td><td>コメント機能を実装</td></tr>
<tr><td>5</td><td>通知</td><td>通知機能を実装</td></tr>
<tr><td>6</td><td>分析</td><td>分析機能を実装</td></tr>
</table>

<h3>🗂️ テーブル設計</h3>
<table><tr><th>項目名</th><th>型</th></tr>
<tr><td>id</td><td>INT</td></tr>
<tr><td>username</td><td>VARCHAR</td></tr>
<tr><td>password</td><td>VARCHAR</td></tr>
</table>

<table><tr><th>項目名</th><th>型</th></tr>
<tr><td>id</td><td>INT</td></tr>
<tr><td>keyword</td><td>VARCHAR</td></tr>
<tr><td>created_at</td><td>DATETIME</td></tr>
</table>

<table><tr><th>項目名</th><th>型</th></tr>
<tr><td>id</td><td>INT</td></tr>
<tr><td>title</td><td>VARCHAR</td></tr>
<tr><td>content</td><td>TEXT</td></tr>
</table>

<table><tr><th>項目名</th><th>型</th></tr>
<tr><td>id</td><td>INT</td></tr>
<tr><td>user_id</td><td>INT</td></tr>
<tr><td>comment</td><td>TEXT</td></tr>
</table>

<table><tr><th>項目名</th><th>型</th></tr>
<tr><td>id</td><td>INT</td></tr>
<tr><td>target_user</td><td>INT</td></tr>
<tr><td>message</td><td>TEXT</td></tr>
</table>

<table><tr><th>項目名</th><th>型</th></tr>
<tr><td>id</td><td>INT</td></tr>
<tr><td>metric_name</td><td>VARCHAR</td></tr>
<tr><td>value</td><td>FLOAT</td></tr>
</table>

<h3>🎞️ 画面遷移図</h3>
<div class="mermaid">
graph TD;
Home-->トップページ;
Home-->商品一覧;
Home-->商品詳細;
Home-->カート;
Home-->会員登録;
Home-->お問い合わせ;
Home-->管理画面;
</div>

<h3>💰 見積明細</h3>
<table>
<tr><th>項目</th><th>金額</th></tr>
<tr><td>基本設計</td><td class="price">150,000</td></tr>
<tr><td>機能追加 (6機能)</td><td class="price">180,000</td></tr>
<tr><td>テーブル設計 (6テーブル)</td><td class="price">60,000</td></tr>
<tr><th>合計（税抜）</th><th class="price">390,000</th></tr>
<tr><th>合計（税込10%）</th><th class="price">429,000</th></tr>
</table>
<button onclick="downloadPDF()">PDF出力</button>

<h3>📄 コード生成指示書</h3>
<textarea readonly>
目的：おまかせ
タイプ：ECサイト
ターゲット：一般ユーザー
技術構成：HTML, CSS, JavaScript, Python
デザイン：1カラム（スマホ中心）・サンセリフ・ブルー系
サーバー：さくらサーバー
外部連携：ファイルメーカー
SNS連携：Instagram, LINE
選択機能：ログイン, 検索, 登録・編集, コメント, 通知, 分析
テーブル：ログイン_tbl, 検索_tbl, 登録・編集_tbl, コメント_tbl, 通知_tbl, 分析_tbl
ページ構成：トップページ, 商品一覧, 商品詳細, カート, 会員登録, お問い合わせ, 管理画面
</textarea>

<h3>💻 コードプレビュー</h3>
<textarea id="codePreview" placeholder="HTML/CSS/JSをここに貼付け"></textarea>
<iframe id="iframePreview"></iframe>
<button onclick="showPreview()">プレビュー表示</button>
</section>

<div id="priceModal" class="modal">
<div class="modal-content">
<span class="close" onclick="closePriceModal()">&times;</span>
<h3>💰料金表（一般的単価目安）</h3>
<table>
<tr><th>区分</th><th>項目</th><th>単価</th></tr>
<tr><td>基本設計</td><td>要件定義</td><td>150,000</td></tr>
<tr><td>機能追加</td><td>1機能</td><td>30,000</td></tr>
<tr><td>テーブル設計</td><td>1テーブル</td><td>10,000</td></tr>
<tr><td>UI/UX</td><td>ページあたり</td><td>15,000</td></tr>
<tr><td>サーバー</td><td>さくら</td><td>10,000/月</td></tr>
<tr><td>外部連携</td><td>ファイルメーカー</td><td>20,000</td></tr>
</table>
</div>
</div>

<script>
mermaid.initialize({startOnLoad:true});
function downloadPDF(){html2pdf().from(document.getElementById("output")).save("estimate.pdf");}
function showPreview(){document.getElementById("iframePreview").srcdoc=document.getElementById("codePreview").value;}
function showPriceModal(){document.getElementById("priceModal").style.display="flex";}
function closePriceModal(){document.getElementById("priceModal").style.display="none";}
</script>
</body>
</html>
