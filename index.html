<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Webã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆãƒ»è¦‹ç©æ”¯æ´ãƒ„ãƒ¼ãƒ« v2</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      padding: 20px;
      max-width: 900px;
      margin: auto;
      background: #f5f7fa;
    }
    h1 { text-align: center; color: #333; }
    h2 { border-bottom: 2px solid #ccc; margin-top: 30px; padding-bottom: 5px; }
    section {
      background: #fff; padding: 20px; border-radius: 10px;
      margin-top: 20px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    label { display: block; margin-top: 10px; font-weight: bold; }
    select, textarea {
      width: 100%; margin-top: 5px; margin-bottom: 10px;
      padding: 8px; border-radius: 6px; border: 1px solid #ccc;
    }
    button {
      background: #0078d4; color: white; border: none;
      padding: 10px 20px; border-radius: 6px; cursor: pointer;
      font-size: 15px;
    }
    button:hover { background: #005fa3; }
    .result { background: #fff; padding: 20px; border-radius: 10px; margin-top: 30px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background: #f0f0f0; }
    .price { text-align: right; }
  </style>
</head>
<body>
  <h1>ğŸŒ Webã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆãƒ»è¦‹ç©æ”¯æ´ãƒ„ãƒ¼ãƒ« v2</h1>

  <section>
    <h2>1ï¸âƒ£ ãƒ’ã‚¢ãƒªãƒ³ã‚°ã‚·ãƒ¼ãƒˆï¼ˆé¸æŠå¼ï¼‰</h2>

    <label>ã‚·ã‚¹ãƒ†ãƒ ç¨®åˆ¥</label>
    <select id="systemType">
      <option value="ECã‚µã‚¤ãƒˆ" data-price="200000">ECã‚µã‚¤ãƒˆï¼ˆÂ¥200,000ï¼‰</option>
      <option value="äºˆç´„ã‚·ã‚¹ãƒ†ãƒ " data-price="250000">äºˆç´„ã‚·ã‚¹ãƒ†ãƒ ï¼ˆÂ¥250,000ï¼‰</option>
      <option value="ç¤¾å†…ç®¡ç†ãƒ„ãƒ¼ãƒ«" data-price="180000">ç¤¾å†…ç®¡ç†ãƒ„ãƒ¼ãƒ«ï¼ˆÂ¥180,000ï¼‰</option>
      <option value="ãƒãƒ¼ã‚¿ãƒ«ã‚µã‚¤ãƒˆ" data-price="220000">ãƒãƒ¼ã‚¿ãƒ«ã‚µã‚¤ãƒˆï¼ˆÂ¥220,000ï¼‰</option>
    </select>

    <label>ä¸»ãªæ©Ÿèƒ½</label>
    <select id="featureSet" multiple size="5">
      <option value="ãƒ­ã‚°ã‚¤ãƒ³èªè¨¼" data-price="30000">ãƒ­ã‚°ã‚¤ãƒ³èªè¨¼ï¼ˆÂ¥30,000ï¼‰</option>
      <option value="ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†" data-price="40000">ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ï¼ˆÂ¥40,000ï¼‰</option>
      <option value="æ¤œç´¢ãƒ»ä¸€è¦§è¡¨ç¤º" data-price="35000">æ¤œç´¢ãƒ»ä¸€è¦§è¡¨ç¤ºï¼ˆÂ¥35,000ï¼‰</option>
      <option value="ç™»éŒ²ãƒ»ç·¨é›†" data-price="40000">ç™»éŒ²ãƒ»ç·¨é›†ï¼ˆÂ¥40,000ï¼‰</option>
      <option value="ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›" data-price="50000">ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›ï¼ˆÂ¥50,000ï¼‰</option>
      <option value="é€šçŸ¥ãƒ»ãƒ¡ãƒ¼ãƒ«é€ä¿¡" data-price="30000">é€šçŸ¥ãƒ»ãƒ¡ãƒ¼ãƒ«é€ä¿¡ï¼ˆÂ¥30,000ï¼‰</option>
      <option value="ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰" data-price="45000">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆÂ¥45,000ï¼‰</option>
    </select>

    <label>ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ¨¡</label>
    <select id="scale">
      <option value="small" data-multiplier="1.0">å°‘äººæ•°ï¼ˆã€œ100åï¼‰</option>
      <option value="medium" data-multiplier="1.3">ä¸­è¦æ¨¡ï¼ˆã€œ1,000åï¼‰</option>
      <option value="large" data-multiplier="1.6">å¤§è¦æ¨¡ï¼ˆ1,000åä»¥ä¸Šï¼‰</option>
    </select>

    <label>ç‰¹è¨˜äº‹é …</label>
    <textarea id="notes" rows="3" placeholder="è¦æœ›ã€åˆ¶ç´„ã€å¤–éƒ¨é€£æºãªã©"></textarea>

    <button onclick="generateAll()">è¨­è¨ˆæ›¸ãƒ»è¦‹ç©ã‚’ç”Ÿæˆ</button>
  </section>

  <section class="result" id="output"></section>

  <script>
    function generateAll() {
      const systemSelect = document.getElementById("systemType");
      const systemType = systemSelect.value;
      const basePrice = parseInt(systemSelect.selectedOptions[0].dataset.price);

      const selectedFeatures = Array.from(document.getElementById("featureSet").selectedOptions)
        .map(opt => ({ name: opt.value, price: parseInt(opt.dataset.price) }));

      const scaleSelect = document.getElementById("scale");
      const scaleText = scaleSelect.options[scaleSelect.selectedIndex].text;
      const multiplier = parseFloat(scaleSelect.selectedOptions[0].dataset.multiplier);

      const notes = document.getElementById("notes").value;

      // é‡‘é¡è¨ˆç®—
      let subtotal = basePrice;
      selectedFeatures.forEach(f => subtotal += f.price);
      const total = Math.round(subtotal * multiplier);

      // æ˜ç´°ä½œæˆ
      let estimateTable = `
        <h3>ğŸ’° è¦‹ç©æ˜ç´°</h3>
        <table>
          <tr><th>é …ç›®</th><th class="price">é‡‘é¡ï¼ˆå††ï¼‰</th></tr>
          <tr><td>${systemType} åŸºæœ¬æ§‹ç¯‰è²»</td><td class="price">${basePrice.toLocaleString()}</td></tr>
          ${selectedFeatures.map(f => `<tr><td>${f.name}</td><td class="price">${f.price.toLocaleString()}</td></tr>`).join("")}
          <tr><td>ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ¨¡èª¿æ•´ (${scaleText})</td><td class="price">Ã— ${multiplier}</td></tr>
          <tr><th>æ¦‚ç®—è¦‹ç©é‡‘é¡</th><th class="price">${total.toLocaleString()}</th></tr>
        </table>
      `;

      // æ©Ÿèƒ½ä¸€è¦§
      let featureList = `
        <h3>ğŸ§© æ©Ÿèƒ½ä¸€è¦§</h3>
        <table>
          <tr><th>No</th><th>æ©Ÿèƒ½å</th><th>æ¦‚è¦</th></tr>
          ${selectedFeatures.map((f, i) => `<tr><td>${i+1}</td><td>${f.name}</td><td>${f.name}ã«é–¢ã™ã‚‹å‡¦ç†ã‚’æä¾›</td></tr>`).join("")}
        </table>
      `;

      // ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆï¼ˆæ©Ÿèƒ½ã‹ã‚‰å‘½åï¼‰
      let tableDesign = `
        <h3>ğŸ—‚ï¸ ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆï¼ˆè‡ªå‹•æ¨å®šï¼‰</h3>
        <table>
          <tr><th>No</th><th>ãƒ†ãƒ¼ãƒ–ãƒ«å</th><th>ç”¨é€”</th></tr>
          ${selectedFeatures.map((f, i) => {
            const tableName = f.name.replace(/[^\w\u3000-\u9fff]/g, "").replace(/\s/g, "_").toLowerCase() + "_tbl";
            return `<tr><td>${i+1}</td><td>${tableName}</td><td>${f.name}é–¢é€£æƒ…å ±ã‚’ç®¡ç†</td></tr>`;
          }).join("")}
        </table>
      `;

      // ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦
      let systemSummary = `
        <h3>ğŸ“˜ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦</h3>
        <p>æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯<strong>${systemType}</strong>ã¨ã—ã¦æ§‹ç¯‰äºˆå®šã€‚æƒ³å®šè¦æ¨¡ã¯<strong>${scaleText}</strong>ã€‚</p>
        <p>ä¸»è¦æ©Ÿèƒ½ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚</p>
        <ul>${selectedFeatures.map(f => `<li>${f.name}</li>`).join("")}</ul>
      `;

      const memo = notes ? `<h3>ğŸ“ å‚™è€ƒ</h3><p>${notes}</p>` : "";

      document.getElementById("output").innerHTML =
        systemSummary + featureList + tableDesign + estimateTable + memo;
    }
  </script>
</body>
</html>
