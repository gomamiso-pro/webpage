<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã‚¹ãƒãƒ›å¯¾å¿œ Webè¨­è¨ˆãƒ»è¦‹ç©æ”¯æ´ãƒ„ãƒ¼ãƒ«</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
  <style>
    body {
      font-family: "Hiragino Sans", "Segoe UI", sans-serif;
      margin: 0;
      padding: 10px;
      background: #f7f7f7;
    }
    h1 { text-align: center; color: #333; font-size: 1.4rem; }
    section { background: #fff; padding: 15px; border-radius: 12px; margin-top: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    label { display: block; margin-top: 10px; font-weight: bold; font-size: 0.9rem; }
    select, input, textarea {
      width: 100%; padding: 8px; margin-top: 4px; border-radius: 6px; border: 1px solid #ccc;
      font-size: 0.9rem;
    }
    button {
      width: 100%; background: #0078d4; color: white; border: none;
      padding: 12px; border-radius: 8px; margin-top: 15px;
      font-size: 1rem;
    }
    button:hover { background: #005fa3; }
    .result { background: #fff; padding: 15px; border-radius: 10px; margin-top: 20px; }
    table { width: 100%; border-collapse: collapse; font-size: 0.9rem; margin-top: 10px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #efefef; }
    .price { text-align: right; }
  </style>
</head>
<body>
  <h1>ğŸ“± Webè¨­è¨ˆãƒ»è¦‹ç©ã‚µãƒãƒ¼ãƒˆãƒ„ãƒ¼ãƒ«</h1>

  <section>
    <h2>ãƒ’ã‚¢ãƒªãƒ³ã‚°ã‚·ãƒ¼ãƒˆ</h2>

    <label>ã‚·ã‚¹ãƒ†ãƒ ç¨®åˆ¥</label>
    <select id="systemType">
      <option value="ECã‚µã‚¤ãƒˆ">ECã‚µã‚¤ãƒˆ</option>
      <option value="äºˆç´„ã‚·ã‚¹ãƒ†ãƒ ">äºˆç´„ã‚·ã‚¹ãƒ†ãƒ </option>
      <option value="ç¤¾å†…ç®¡ç†">ç¤¾å†…ç®¡ç†</option>
      <option value="ãƒãƒ¼ã‚¿ãƒ«ã‚µã‚¤ãƒˆ">ãƒãƒ¼ã‚¿ãƒ«ã‚µã‚¤ãƒˆ</option>
    </select>

    <label>ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå±¤</label>
    <select id="target">
      <option>ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼</option>
      <option>æ³•äºº</option>
      <option>å­¦ç”Ÿãƒ»æ•™è‚²ç³»</option>
      <option>é«˜é½¢è€…å‘ã‘</option>
    </select>

    <label>ä½¿ç”¨è¨€èª</label>
    <select id="lang">
      <option>HTML / CSS / JavaScript</option>
      <option>React / Node.js</option>
      <option>PHP / Laravel</option>
      <option>Python / Django</option>
    </select>

    <label>ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚¤ãƒ¡ãƒ¼ã‚¸</label>
    <select id="layout">
      <option>1ã‚«ãƒ©ãƒ ï¼ˆã‚¹ãƒãƒ›ä¸­å¿ƒï¼‰</option>
      <option>2ã‚«ãƒ©ãƒ ï¼ˆPCãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆä¸¡å¯¾å¿œï¼‰</option>
      <option>ã‚«ãƒ¼ãƒ‰å‹ãƒ‡ã‚¶ã‚¤ãƒ³</option>
    </select>

    <label>ãƒ•ã‚©ãƒ³ãƒˆ</label>
    <select id="font">
      <option>ã‚µãƒ³ã‚»ãƒªãƒ•ï¼ˆã™ã£ãã‚Šï¼‰</option>
      <option>æ˜æœä½“ï¼ˆä¸Šå“ï¼‰</option>
      <option>ä¸¸ã‚´ã‚·ãƒƒã‚¯ï¼ˆè¦ªã—ã¿ã‚„ã™ã„ï¼‰</option>
    </select>

    <label>è‰²å‘³</label>
    <select id="color">
      <option>ãƒ–ãƒ«ãƒ¼ç³»ï¼ˆä¿¡é ¼ãƒ»èª å®Ÿï¼‰</option>
      <option>ã‚°ãƒªãƒ¼ãƒ³ç³»ï¼ˆå®‰å¿ƒãƒ»å¥åº·ï¼‰</option>
      <option>ã‚ªãƒ¬ãƒ³ã‚¸ç³»ï¼ˆæ˜ã‚‹ã„ãƒ»å…ƒæ°—ï¼‰</option>
      <option>ãƒ¢ãƒãƒˆãƒ¼ãƒ³ï¼ˆè½ã¡ç€ãï¼‰</option>
    </select>

    <label>é›°å›²æ°—</label>
    <select id="tone">
      <option>ã‚·ãƒ³ãƒ—ãƒ«</option>
      <option>ãƒãƒƒãƒ—</option>
      <option>ã‚¯ãƒ¼ãƒ«</option>
      <option>ãƒŠãƒãƒ¥ãƒ©ãƒ«</option>
    </select>

    <label>ãƒšãƒ¼ã‚¸æ§‹æˆ</label>
    <select id="pages" multiple size="4">
      <option>ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸</option>
      <option>å•†å“ä¸€è¦§ / æŠ•ç¨¿ä¸€è¦§</option>
      <option>è©³ç´°ãƒšãƒ¼ã‚¸</option>
      <option>ãŠå•ã„åˆã‚ã› / ç®¡ç†ç”»é¢</option>
    </select>

    <label>æƒ³å®šæ©Ÿèƒ½</label>
    <div id="featureList">
      <label><input type="checkbox" value="ãƒ­ã‚°ã‚¤ãƒ³">ãƒ­ã‚°ã‚¤ãƒ³</label>
      <label><input type="checkbox" value="æ¤œç´¢">æ¤œç´¢</label>
      <label><input type="checkbox" value="ç™»éŒ²ãƒ»ç·¨é›†">ç™»éŒ²ãƒ»ç·¨é›†</label>
      <label><input type="checkbox" value="ã‚³ãƒ¡ãƒ³ãƒˆ">ã‚³ãƒ¡ãƒ³ãƒˆ</label>
      <label><input type="checkbox" value="é€šçŸ¥">é€šçŸ¥</label>
      <label><input type="checkbox" value="åˆ†æ">åˆ†æ</label>
    </div>

    <label>ãƒ†ãƒ¼ãƒ–ãƒ«æ•°</label>
    <input type="number" id="tableCount" min="1" max="30" value="5">

    <button onclick="generateAll()">è¨­è¨ˆãƒ»è¦‹ç©ã‚’ä½œæˆ</button>
  </section>

  <section class="result" id="output"></section>

  <script>
    mermaid.initialize({ startOnLoad: false });

    function generateAll() {
      const systemType = document.getElementById("systemType").value;
      const target = document.getElementById("target").value;
      const lang = document.getElementById("lang").value;
      const layout = document.getElementById("layout").value;
      const font = document.getElementById("font").value;
      const color = document.getElementById("color").value;
      const tone = document.getElementById("tone").value;
      const pages = Array.from(document.getElementById("pages").selectedOptions).map(o => o.value);
      const features = Array.from(document.querySelectorAll("#featureList input:checked")).map(f => f.value);
      const tableCount = parseInt(document.getElementById("tableCount").value);

      const base = 150000;
      const perFeature = 30000;
      const perTable = 10000;
      const subtotal = base + features.length * perFeature + tableCount * perTable;
      const total = subtotal * 1.1;

      // æ¦‚è¦
      let html = `<h3>ğŸ“˜ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦</h3>
        <p>${systemType}ï¼ˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼š${target}ï¼‰<br>
        ä½¿ç”¨è¨€èªï¼š${lang}<br>
        ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼š${layout} / ãƒ•ã‚©ãƒ³ãƒˆï¼š${font}<br>
        ã‚«ãƒ©ãƒ¼ï¼š${color} / é›°å›²æ°—ï¼š${tone}</p>`;

      // æ©Ÿèƒ½ä¸€è¦§
      html += `<h3>ğŸ§© æ©Ÿèƒ½ä¸€è¦§</h3><table><tr><th>No</th><th>æ©Ÿèƒ½å</th><th>æ¦‚è¦</th></tr>`;
      features.forEach((f, i) => html += `<tr><td>${i+1}</td><td>${f}</td><td>${f}ã«é–¢ã™ã‚‹æ©Ÿèƒ½</td></tr>`);
      html += `</table>`;

      // ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ
      html += `<h3>ğŸ—‚ï¸ ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆï¼ˆä»®ï¼‰</h3><table><tr><th>No</th><th>ãƒ†ãƒ¼ãƒ–ãƒ«å</th><th>ä¸»ãªé …ç›®</th></tr>`;
      for (let i=0;i<tableCount;i++){
        const name = features[i % features.length] || `æ±ç”¨ãƒ‡ãƒ¼ã‚¿`;
        html += `<tr><td>${i+1}</td><td>${name}_tbl</td><td>id, ${name}_name, updated_at</td></tr>`;
      }
      html += `</table>`;

      // è¦‹ç©æ˜ç´°
      html += `<h3>ğŸ’° è¦‹ç©æ˜ç´°</h3>
        <table>
        <tr><th>é …ç›®</th><th>å˜ä¾¡</th><th>æ•°é‡</th><th>å°è¨ˆ</th></tr>
        <tr><td>åŸºæœ¬è¨­è¨ˆè²»</td><td class="price">150,000</td><td>1</td><td class="price">150,000</td></tr>
        <tr><td>æ©Ÿèƒ½å®Ÿè£…</td><td class="price">30,000</td><td>${features.length}</td><td class="price">${features.length * 30000}</td></tr>
        <tr><td>DBè¨­è¨ˆ</td><td class="price">10,000</td><td>${tableCount}</td><td class="price">${tableCount * 10000}</td></tr>
        <tr><th colspan="3">åˆè¨ˆï¼ˆç¨æŠœï¼‰</th><th class="price">${subtotal.toLocaleString()}</th></tr>
        <tr><th colspan="3">ç¨è¾¼</th><th class="price">${Math.round(total).toLocaleString()} å††</th></tr>
        </table>`;

      // ç”»é¢é·ç§»å›³
      let mermaidCode = "graph TD;\n";
      pages.forEach((p,i) => {
        if (i < pages.length - 1) mermaidCode += `${p}-->${pages[i+1]}\n`;
      });
      html += `<h3>ğŸ§­ ç”»é¢é·ç§»å›³</h3><div class="mermaid">${mermaidCode}</div>`;

      document.getElementById("output").innerHTML = html;
      mermaid.init(undefined, document.querySelectorAll('.mermaid'));
    }
  </script>
</body>
</html>
