<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Webè¨­è¨ˆãƒ»è¦‹ç©ãƒ»æŒ‡ç¤ºæ›¸ãƒ„ãƒ¼ãƒ«ï¼ˆå®Œå…¨ç‰ˆï¼‰</title>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<style>
body { font-family: "Hiragino Sans", sans-serif; margin:0; padding:10px; background:#f7f7f7; }
header { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
header h1 { font-size:1.4rem; color:#333; }
.price-btn { background:#0078d4; color:white; border:none; border-radius:6px; padding:6px 12px; cursor:pointer; }
.price-btn:hover { background:#005fa3; }
section { background:#fff; padding:15px; border-radius:12px; margin-top:10px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
label { display:block; margin-top:10px; font-weight:bold; font-size:0.9rem; }
select, input, textarea { width:100%; padding:8px; margin-top:4px; border-radius:6px; border:1px solid #ccc; font-size:0.9rem; }
button { width:100%; background:#0078d4; color:white; border:none; padding:12px; border-radius:8px; margin-top:15px; font-size:1rem; }
button:hover { background:#005fa3; }
.result { background:#fff; padding:15px; border-radius:10px; margin-top:20px; }
table { width:100%; border-collapse:collapse; font-size:0.9rem; margin-top:10px; }
th, td { border:1px solid #ddd; padding:6px; }
th { background:#efefef; }
.price { text-align:right; }
textarea#instruction { width:100%; height:120px; margin-top:10px; font-size:0.9rem; }
iframe { width:100%; height:200px; border:1px solid #ccc; border-radius:6px; margin-top:10px; }
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.4); justify-content:center; align-items:center; }
.modal-content { background:#fff; padding:20px; border-radius:10px; max-width:90%; max-height:90%; overflow:auto; }
.close { float:right; cursor:pointer; font-weight:bold; font-size:1.2rem; }
</style>
</head>
<body>
<header>
<h1>ğŸ“± Webè¨­è¨ˆãƒ»è¦‹ç©ãƒ»æŒ‡ç¤ºæ›¸ãƒ„ãƒ¼ãƒ«</h1>
<button class="price-btn" onclick="showPriceModal()">ğŸ’°æ–™é‡‘è¡¨</button>
</header>

<section>
<h2>ãƒ’ã‚¢ãƒªãƒ³ã‚°ã‚·ãƒ¼ãƒˆ</h2>

<label>ç›®çš„</label>
<input type="text" id="purpose" placeholder="ä¾‹ï¼šæ–°è¦é¡§å®¢ç²å¾—ãƒ»äºˆç´„åŠ¹ç‡åŒ–ãƒ»æƒ…å ±ç™ºä¿¡ï¼ˆæœªå…¥åŠ›ã§ãŠã¾ã‹ã›ï¼‰">

<label>ã‚·ã‚¹ãƒ†ãƒ ç¨®åˆ¥</label>
<select id="systemType">
<option>ECã‚µã‚¤ãƒˆ</option>
<option>äºˆç´„ã‚·ã‚¹ãƒ†ãƒ </option>
<option>ç¤¾å†…ç®¡ç†</option>
<option>ãƒãƒ¼ã‚¿ãƒ«ã‚µã‚¤ãƒˆ</option>
</select>

<label>ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå±¤</label>
<select id="target">
<option>ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼</option>
<option>æ³•äºº</option>
<option>å­¦ç”Ÿãƒ»æ•™è‚²ç³»</option>
<option>é«˜é½¢è€…å‘ã‘</option>
</select>

<label>ä½¿ç”¨è¨€èªï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</label>
<select id="langs" multiple size="5">
<option>HTML</option><option>CSS</option><option>JavaScript</option>
<option>React</option><option>PHP</option><option>Laravel</option>
<option>Python</option><option>Django</option>
</select>

<label>ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ»ãƒ‡ã‚¶ã‚¤ãƒ³</label>
<select id="layout">
<option>1ã‚«ãƒ©ãƒ ï¼ˆã‚¹ãƒãƒ›ä¸­å¿ƒï¼‰</option>
<option>2ã‚«ãƒ©ãƒ </option>
<option>ã‚«ãƒ¼ãƒ‰å‹ãƒ‡ã‚¶ã‚¤ãƒ³</option>
</select>

<label>ãƒ•ã‚©ãƒ³ãƒˆ</label>
<select id="font">
<option>ã‚µãƒ³ã‚»ãƒªãƒ•</option>
<option>æ˜æœä½“</option>
<option>ä¸¸ã‚´ã‚·ãƒƒã‚¯</option>
</select>

<label>è‰²å‘³ãƒ»é›°å›²æ°—</label>
<select id="color">
<option>ãƒ–ãƒ«ãƒ¼ç³»</option>
<option>ã‚ªãƒ¬ãƒ³ã‚¸ç³»</option>
<option>ã‚°ãƒªãƒ¼ãƒ³ç³»</option>
<option>ãƒ¢ãƒãƒˆãƒ¼ãƒ³</option>
</select>

<label>ãƒšãƒ¼ã‚¸æ§‹æˆï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</label>
<select id="pages" multiple size="6">
<option>ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸</option><option>å•†å“ä¸€è¦§</option><option>å•†å“è©³ç´°</option>
<option>ã‚«ãƒ¼ãƒˆ</option><option>ä¼šå“¡ç™»éŒ²</option><option>ãŠå•ã„åˆã‚ã›</option>
<option>ç®¡ç†ç”»é¢</option>
</select>

<label>æ©Ÿèƒ½ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</label>
<div id="featureList">
<label><input type="checkbox" value="ãƒ­ã‚°ã‚¤ãƒ³">ãƒ­ã‚°ã‚¤ãƒ³</label>
<label><input type="checkbox" value="æ¤œç´¢">æ¤œç´¢</label>
<label><input type="checkbox" value="ç™»éŒ²ãƒ»ç·¨é›†">ç™»éŒ²ãƒ»ç·¨é›†</label>
<label><input type="checkbox" value="ã‚³ãƒ¡ãƒ³ãƒˆ">ã‚³ãƒ¡ãƒ³ãƒˆ</label>
<label><input type="checkbox" value="é€šçŸ¥">é€šçŸ¥</label>
<label><input type="checkbox" value="åˆ†æ">åˆ†æ</label>
</div>

<label>ã‚µãƒ¼ãƒãƒ¼é¸æŠ</label>
<select id="server">
<option>ã•ãã‚‰ã‚µãƒ¼ãƒãƒ¼</option>
<option>Xserver</option>
<option>AWS</option>
<option>Google Cloud</option>
<option>ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º</option>
</select>

<label>å¤–éƒ¨é€£æº</label>
<select id="external" multiple size="2">
<option>ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆ</option>
<option>ãƒ•ã‚¡ã‚¤ãƒ«ãƒ¡ãƒ¼ã‚«ãƒ¼</option>
</select>

<label>SNSé€£æºï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</label>
<select id="sns" multiple size="4">
<option>Twitter</option><option>Instagram</option><option>LINE</option><option>YouTube</option>
</select>

<button onclick="generateAll()">è¨­è¨ˆãƒ»è¦‹ç©ãƒ»æŒ‡ç¤ºæ›¸ã‚’ä½œæˆ</button>
</section>

<section class="result" id="output"></section>

<!-- æ–™é‡‘è¡¨ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="priceModal" class="modal">
<div class="modal-content">
<span class="close" onclick="closePriceModal()">&times;</span>
<h3>ğŸ’°æ–™é‡‘è¡¨ï¼ˆä¸€èˆ¬çš„ãªå˜ä¾¡ç›®å®‰ï¼‰</h3>
<table>
<tr><th>åŒºåˆ†</th><th>é …ç›®</th><th>å˜ä¾¡</th><th>å‚™è€ƒ</th></tr>
<tr><td>åŸºæœ¬è¨­è¨ˆ</td><td>è¦ä»¶å®šç¾©</td><td>150,000</td><td>æ¦‚è¦ãƒ»ä»•æ§˜æ•´ç†å«ã‚€</td></tr>
<tr><td>æ©Ÿèƒ½è¿½åŠ </td><td>1æ©Ÿèƒ½</td><td>30,000</td><td>CRUDï¼‹ç”»é¢ä»˜ã</td></tr>
<tr><td>DBè¨­è¨ˆ</td><td>1ãƒ†ãƒ¼ãƒ–ãƒ«</td><td>10,000</td><td>ERè¨­è¨ˆå«ã‚€</td></tr>
<tr><td>UI/UX</td><td>ãƒšãƒ¼ã‚¸ã‚ãŸã‚Š</td><td>15,000</td><td>ãƒ¯ã‚¤ãƒ¤ãƒ¼åˆ¶ä½œå«ã‚€</td></tr>
<tr><td>é‹ç”¨ä¿å®ˆ</td><td>æœˆé¡</td><td>5,000ã€œ</td><td>è»½å¾®ä¿®æ­£å¯¾å¿œ</td></tr>
<tr><td>ã‚µãƒ¼ãƒãƒ¼</td><td>ã•ãã‚‰</td><td>10,000/æœˆ</td><td>å…±ç”¨ãƒ—ãƒ©ãƒ³</td></tr>
<tr><td>ã‚µãƒ¼ãƒãƒ¼</td><td>AWS</td><td>25,000/æœˆã€œ</td><td>t3.smallæ§‹æˆæƒ³å®š</td></tr>
<tr><td>å¤–éƒ¨é€£æº</td><td>ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆ</td><td>10,000</td><td>APIè¨­å®šå«ã‚€</td></tr>
<tr><td>å¤–éƒ¨é€£æº</td><td>ãƒ•ã‚¡ã‚¤ãƒ«ãƒ¡ãƒ¼ã‚«ãƒ¼</td><td>20,000</td><td>APIä¸­ç¶™è¨­å®šå«ã‚€</td></tr>
</table>
</div>
</div>

<script>
mermaid.initialize({startOnLoad:true});
const tableTemplates={
"ãƒ­ã‚°ã‚¤ãƒ³":[{name:"id",type:"INT"},{name:"username",type:"VARCHAR"},{name:"password",type:"VARCHAR"}],
"æ¤œç´¢":[{name:"id",type:"INT"},{name:"keyword",type:"VARCHAR"},{name:"created_at",type:"DATETIME"}],
"ç™»éŒ²ãƒ»ç·¨é›†":[{name:"id",type:"INT"},{name:"title",type:"VARCHAR"},{name:"content",type:"TEXT"}],
"ã‚³ãƒ¡ãƒ³ãƒˆ":[{name:"id",type:"INT"},{name:"user_id",type:"INT"},{name:"comment",type:"TEXT"}],
"é€šçŸ¥":[{name:"id",type:"INT"},{name:"target_user",type:"INT"},{name:"message",type:"TEXT"}],
"åˆ†æ":[{name:"id",type:"INT"},{name:"metric_name",type:"VARCHAR"},{name:"value",type:"FLOAT"}]
};
function showPriceModal(){document.getElementById("priceModal").style.display="flex";}
function closePriceModal(){document.getElementById("priceModal").style.display="none";}

function generateAll(){
const purpose=document.getElementById("purpose").value||"ãŠã¾ã‹ã›";
const systemType=document.getElementById("systemType").value;
const target=document.getElementById("target").value;
const langs=Array.from(document.getElementById("langs").selectedOptions).map(o=>o.value);
const layout=document.getElementById("layout").value;
const font=document.getElementById("font").value;
const color=document.getElementById("color").value;
const pages=Array.from(document.getElementById("pages").selectedOptions).map(o=>o.value);
const features=Array.from(document.querySelectorAll("#featureList input:checked")).map(f=>f.value);
const server=document.getElementById("server").value;
const external=Array.from(document.getElementById("external").selectedOptions).map(o=>o.value);
const sns=Array.from(document.getElementById("sns").selectedOptions).map(o=>o.value);

// è‡ªå‹•ãƒ†ãƒ¼ãƒ–ãƒ«ç”Ÿæˆ
let tables=[];
features.forEach(f=>{if(tableTemplates[f]) tables.push({name:`${f}_tbl`, fields:tableTemplates[f]});});
if(tables.length===0) tables.push({name:"main_tbl", fields:[{name:"id",type:"INT"},{name:"name",type:"VARCHAR"}]});

// è¦‹ç©è¨ˆç®—
const base=150000, perFeature=30000, perTable=10000;
const subtotal=base+features.length*perFeature+tables.length*perTable;
const total=subtotal*1.1;

// å‡ºåŠ›HTML
let html=`<h3>ğŸ“˜ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦</h3>
<p>ç›®çš„ï¼š${purpose}<br>ã‚¿ã‚¤ãƒ—ï¼š${systemType}<br>ã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼š${target}<br>æŠ€è¡“æ§‹æˆï¼š${langs.join(", ")}<br>ãƒ‡ã‚¶ã‚¤ãƒ³ï¼š${layout}ãƒ»${font}ãƒ»${color}<br>ã‚µãƒ¼ãƒãƒ¼ï¼š${server}<br>å¤–éƒ¨é€£æºï¼š${external.join(", ")}<br>SNSé€£æºï¼š${sns.join(", ")}</p>`;

html+=`<h3>ğŸ§© æ©Ÿèƒ½ä¸€è¦§</h3><table><tr><th>No</th><th>æ©Ÿèƒ½</th><th>æ¦‚è¦</th></tr>`;
features.forEach((f,i)=>html+=`<tr><td>${i+1}</td><td>${f}</td><td>${f}æ©Ÿèƒ½ã‚’å®Ÿè£…</td></tr>`);
html+=`</table>`;

// ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ
html+=`<h3>ğŸ—‚ï¸ ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ</h3>`;
tables.forEach((t,i)=>{
  html+=`<h4>${i+1}. ${t.name}</h4><table><tr><th>é …ç›®å</th><th>å‹</th></tr>`;
  t.fields.forEach(f=>html+=`<tr><td>${f.name}</td><td>${f.type}</td></tr>`);
  html+=`</table>`;
});

// ç”»é¢é·ç§»å›³
html+=`<h3>ğŸï¸ ç”»é¢é·ç§»å›³</h3><div class="mermaid">graph TD; Home-->${pages.join(" ; ")};</div>`;

// è¦‹ç©æ˜ç´°
html+=`<h3>ğŸ’° è¦‹ç©æ˜ç´°</h3>
<table><tr><th>é …ç›®</th><th>é‡‘é¡</th></tr>
<tr><td>åŸºæœ¬è¨­è¨ˆ</td><td class="price">${base}</td></tr>
<tr><td>æ©Ÿèƒ½è¿½åŠ  (${features.length}æ©Ÿèƒ½)</td><td class="price">${features.length*perFeature}</td></tr>
<tr><td>ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ (${tables.length}ãƒ†ãƒ¼ãƒ–ãƒ«)</td><td class="price">${tables.length*perTable}</td></tr>
<tr><th>åˆè¨ˆï¼ˆç¨æŠœï¼‰</th><th class="price">${subtotal}</th></tr>
<tr><th>åˆè¨ˆï¼ˆç¨è¾¼10%ï¼‰</th><th class="price">${total}</th></tr>
</table>
<button onclick="downloadPDF()">PDFå‡ºåŠ›</button>`;

// ã‚³ãƒ¼ãƒ‰ç”ŸæˆæŒ‡ç¤ºæ›¸
html+=`<h3>ğŸ“„ ã‚³ãƒ¼ãƒ‰ç”ŸæˆæŒ‡ç¤ºæ›¸</h3>
<textarea id="instruction" readonly>
ç›®çš„ï¼š${purpose}
ã‚¿ã‚¤ãƒ—ï¼š${systemType}
ã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼š${target}
æŠ€è¡“æ§‹æˆï¼š${langs.join(", ")}
ãƒ‡ã‚¶ã‚¤ãƒ³ï¼š${layout}ãƒ»${font}ãƒ»${color}
ã‚µãƒ¼ãƒãƒ¼ï¼š${server}
å¤–éƒ¨é€£æºï¼š${external.join(", ")}
SNSé€£æºï¼š${sns.join(", ")}
é¸æŠæ©Ÿèƒ½ï¼š${features.join(", ")}
ãƒ†ãƒ¼ãƒ–ãƒ«ï¼š${tables.map(t=>t.name).join(", ")}
ãƒšãƒ¼ã‚¸æ§‹æˆï¼š${pages.join(", ")}
</textarea>`;

// ã‚³ãƒ¼ãƒ‰ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
html+=`<h3>ğŸ’» ã‚³ãƒ¼ãƒ‰ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h3><textarea id="codePreview" placeholder="ã“ã“ã«HTML/CSS/JSã‚’è²¼ä»˜ã‘"></textarea>
<iframe id="iframePreview"></iframe>
<button onclick="showPreview()">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º</button>`;

document.getElementById("output").innerHTML=html;
}

// PDFå‡ºåŠ›
function downloadPDF(){
const element=document.getElementById("output");
html2pdf().from(element).save("estimate.pdf");
}

// ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
function showPreview(){
const code=document.getElementById("codePreview").value;
const iframe=document.getElementById("iframePreview");
iframe.srcdoc=code;
}
</script>
</body>
</html>
